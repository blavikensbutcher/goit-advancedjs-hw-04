{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImages(input, page = 1, per_page) {\n  const options = {\n    key: '41061573-024b7cbeabeac3d17174d6333',\n    q: String(input),\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: per_page || '20',\n  };\n\n  const params = new URLSearchParams(options);\n\n  const res = await axios.get(`https://pixabay.com/api/?${params}`);\n\n  return res.data;\n}\n","function createCardMarkup(img) {\n  return `\n    <a class=\"gallery__item\" href=\"${img.largeImageURL}\">\n      <div class=\"photo-card\">\n        <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" loading=\"lazy\" />\n        <div class=\"info\">\n          <p><b>Likes:</b> ${img.likes}</p>\n          <p><b>Views:</b> ${img.views}</p>\n          <p><b>Comments:</b> ${img.comments}</p>\n          <p><b>Downloads:</b> ${img.downloads}</p>\n        </div>\n      </div>\n    </a>`;\n}\n\nexport function renderGallery(container, images) {\n  container.innerHTML = images.map(createCardMarkup).join('');\n}\n\nexport function insertGalleryItems(container, images) {\n  container.insertAdjacentHTML(\n    'beforeend',\n    images.map(createCardMarkup).join('')\n  );\n}\n\nexport function clearGallery(container) {\n  container.innerHTML = '';\n}\n\nexport function showLoader(loader) {\n  loader.classList.remove('is-hidden');\n}\n\nexport function hideLoader(loader) {\n  loader.classList.add('is-hidden');\n}\n\nexport function showBtn(btn) {\n  btn.classList.remove('is-hidden');\n}\n\nexport function hideBtn(btn) {\n  btn.classList.add('is-hidden');\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImages } from './js/pixabay-api';\nimport {\n  renderGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showBtn,\n  hideBtn,\n  insertGalleryItems,\n} from './js/render-functions';\n\nconst form = document.querySelector('#search-form');\nconst input = document.querySelector('#search-input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('#loader');\nconst btn = document.querySelector('.load-more-btn');\n\nlet query = '';\nlet page = 1;\nconst perPage = 15;\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n// ------------------------------\n// Handle \"Load More\" button\n// ------------------------------\nconst handleBtnClick = async () => {\n  try {\n    page += 1;\n    showLoader(loader);\n    btn.disabled = true;\n\n    const { hits: images, totalHits } = await getImages(query, page, perPage);\n\n    insertGalleryItems(gallery, images);\n    lightbox.refresh();\n\n    const firstCard = gallery.firstElementChild;\n    if (firstCard) {\n      const { height: cardHeight } = firstCard.getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n\n    // Check if more results exist\n    if (perPage * page >= totalHits) {\n      hideBtn(btn);\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Error while loading more images!',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader(loader);\n    btn.disabled = false;\n  }\n};\n\nbtn.addEventListener('click', handleBtnClick);\n\n// ------------------------------\n// Handle form submit\n// ------------------------------\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  query = input.value.trim();\n  page = 1;\n\n  if (!query) {\n    iziToast.warning({ message: 'Input text to search!' });\n    return;\n  }\n\n  clearGallery(gallery);\n  showLoader(loader);\n  hideBtn(btn);\n\n  try {\n    const { hits, totalHits } = await getImages(query, page, perPage);\n\n    if (!hits.length) {\n      iziToast.info({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    renderGallery(gallery, hits);\n    lightbox.refresh();\n\n    iziToast.success({\n      message: `We found ${totalHits} results.`,\n      position: 'topRight',\n    });\n\n    // Show button only if there are more pages\n    if (totalHits > perPage) {\n      showBtn(btn);\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Error during loading!',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader(loader);\n  }\n});\n"],"names":["getImages","input","page","per_page","options","params","axios","createCardMarkup","img","renderGallery","container","images","insertGalleryItems","clearGallery","showLoader","loader","hideLoader","showBtn","btn","hideBtn","form","gallery","query","perPage","lightbox","SimpleLightbox","handleBtnClick","totalHits","firstCard","cardHeight","iziToast","hits"],"mappings":"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"}